/**
 * @Version 0.1.0
 * @Author: ta7sudan
 * @Repo: https://github.com/ta7sudan/apiz-ng#readme
 * @License: MIT
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a["apiz-ng"]={})})(this,function(a){"use strict";function b(a,b="json",c){return"json"===b?JSON.stringify(a):"form"===b?c(a):a}function c(a,b,{baseURL:c,paramRegex:d,bodyParser:e,querystring:f,client:g}){let{url:h,baseURL:i,path:j,method:n="GET",type:p=o,pathParams:q=!1}=b;const r={},s=i||c;if("remove"===a||"add"===a)throw new Error("\"remove\" and \"add\" is preserved key.");if(!k(b))throw new TypeError(`API ${a} expected an object, but received ${JSON.stringify(b)}.`);if(m(h))r.url=h;else if(m(s))r.url=(s+(j||"")).replace(/:?\/\//g,a=>~a.indexOf(":")?a:"/");else throw new Error(`API "${a}" must set url or baseURL correctly.`);n=n.toUpperCase();let t=n.toLowerCase();if(-1===["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS"].indexOf(n))throw new Error(`Unsupported HTTP method: ${n}.`);if(!l(g[t]))throw new Error(`client must implement a ${t} function.`);return r.method=n,r.methodLowerCase=t,r[t]=g[t],r.type=p,r.pathParams=q,r.regex=d,r.querystring=f,r.bodyParser=e,r.init=!0,r}function d(a){return(b,c)=>{if(null==a[c])throw new Error(`Can't find a property "${c}" in params.`);return encodeURIComponent(a[c])}}function e(...a){const{methodLowerCase:b,pathParams:c,regex:e,querystring:f}=this;let g,h,i,j=this.url;if(!0===a[1])return this[b](j,a[0]);if(c?(g=a[0],h=a[1]):h=a[0],!h&&!g)return this[b](j);if(g)j=j.replace(e,d(g));else if(c)throw new Error("Path params is required.");return h&&(i=f(h),j=~j.indexOf("?")?`${j}&${i}`:`${j}?${i}`),this[b](j)}function f(...a){const{methodLowerCase:b,type:c,pathParams:e,regex:f,querystring:g,bodyParser:h}=this;let i,j,k,l,m,n=this.url;if(!0===a[1])return this[b](n,a[0],c);if(e?(j=a[1],k=a[2]):k=a[1],i=a[0],l=h(i,c,g),j)n=n.replace(f,d(j));else if(e)throw new Error("Path params is required.");return k||j?(k&&(m=g(k),n=~n.indexOf("?")?`${n}&${m}`:`${n}?${m}`),this[b](n,l,c)):this[b](n,l,c)}function g(a){const b=v[a.method].bind(a);return["url","method","type","pathParams"].forEach(c=>{Object.defineProperty(b,c,{value:a[c],enumerable:!0,writable:!1})}),b}function h(a,d){let e,f,i,j,o,v,w={};if(m(a._baseURL)&&(e=a._baseURL),({baseURL:e=e,immutableMeta:f=t,paramRegex:i=q||u,bodyParser:j=r||b,querystring:o=p,client:v=s}=d||{}),!l(o))throw new Error("A querystring function must set.");if(!v)throw new Error("A client must set.");const x={baseURL:e,paramRegex:i,bodyParser:j,querystring:o,client:v};if(f)w=a||{};else for(const b in a)k(a[b])?w[b]=c(b,a[b],x):"_baseURL"!=b&&console.warn(`The ${b} in config is not an object.`);const y=new Proxy({},{get(a,b,d){return w[b]&&n(w,b)?(w[b].init||(w[b]=c(b,w[b],x)),Reflect.set(d,b,g(w[b])),Reflect.get(d,b)):Reflect.get(a,b)},getPrototypeOf(){return h.prototype}}),z=Object.create(y);return z.remove=function(a){this[a]&&(w[a]=this[a]=void 0)},z.add=function(a,b){if(w[a])throw new Error(`API "${a}" already exists.`);w[a]=c(a,b,x),this[a]=g(w[a])},z}function i({querystring:a,paramRegex:b,bodyParser:c,immutableMeta:d,client:e,reset:f,defaultType:g}={reset:!0}){l(a)&&(p=a),l(c)&&(r=c),b instanceof RegExp&&(q=b),t=d,s=e,o=g,f&&(p=q=r=s=o=void 0,t=!1)}const j=Map.call.bind(Object.prototype.toString),k=a=>"[object Object]"===j(a),l=a=>"function"==typeof a,m=a=>a&&"string"==typeof a,n=Map.call.bind(Object.prototype.propertyIsEnumerable);let o,p,q,r,s,t=!1;const u=/:((\w|-)+)/g,v={GET:e,HEAD:e,POST:f,PUT:f,PATCH:f,OPTIONS:f,DELETE:f};i({querystring:function(a){return"[object Object]"===Object.prototype.toString.call(a)?Object.keys(a).map(b=>Array.isArray(a[b])?a[b].map(a=>`${encodeURIComponent(b)}=${encodeURIComponent(a)}`).join("&"):`${encodeURIComponent(b)}=${encodeURIComponent(a[b])}`).join("&"):JSON.stringify(a)},defaultType:"json"}),a.APIz=h,a.config=i,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=apiz.min.js.map
