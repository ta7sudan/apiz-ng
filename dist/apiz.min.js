/**
 * @Version 1.1.3
 * @Author: ta7sudan
 * @Repo: https://github.com/ta7sudan/apiz-ng#readme
 * @License: MIT
 */(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.apizng={}))})(this,function(a){'use strict';function b(a,b,{baseURL:c,paramRegex:d,querystring:e,client:f}){let{url:g,baseURL:h,path:i,meta:m,method:o="GET",type:p=n,pathParams:q=!1}=b;const r={},s=h||c;if("remove"===a||"add"===a)throw new Error("\"remove\" and \"add\" is preserved key.");if(!j(b))throw new TypeError(`API ${a} expected an object, but received ${JSON.stringify(b)}.`);if(l(g))r.url=g;else if(l(s))r.url=(s+(i||"")).replace(t,v);else throw new Error(`API "${a}" must set url or baseURL correctly.`);o=o.toUpperCase();const u=o.toLowerCase();if(-1===["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS"].indexOf(o))throw new Error(`Unsupported HTTP method: ${o}.`);if(!k(f[u]))throw new Error(`client must implement a ${u} function.`);const w=r.url.split(/\/(?=\w|:)/g),x=/^(https?:|\/)/.test(w[0])?2:1;return r.baseURL=w.slice(0,x).join("/"),r.path=`/${w.slice(x).join("/")}`,r.name=a,r.meta=m,r.method=o,r.methodLowerCase=u,r[u]=f[u],r.type=p,r.pathParams=q,r.regex=d,r.querystring=e,r.init=!0,r}function c(a){return(b,c)=>{if(null==a[c])throw new Error(`Can't find a property "${c}" in params.`);return encodeURIComponent(a[c])}}function d(...a){const{methodLowerCase:b,pathParams:d,regex:e,querystring:f,baseURL:g,path:h}=this;let i,j,k,l=this.url;if(!0===a[1])return this[b]({url:l,name:this.name,meta:this.meta,options:a[0]});if(d?(i=a[0],j=a[1]):j=a[0],i)l=g+h.replace(e,c(i));else if(d)throw new Error("Path params is required.");return j&&(k=f(j),l=-1===l.indexOf("?")?`${l}?${k}`:`${l}&${k}`),this[b]({url:l,name:this.name,meta:this.meta})}function e(...a){const{methodLowerCase:b,type:d,pathParams:e,regex:f,querystring:g,baseURL:h,path:i}=this;let j,k,m,n,o,p=this.url;if(!0===a[1])return this[b]({url:p,type:n,name:this.name,meta:this.meta,options:a[0]});if(e?(j=a[1],k=a[2],n=a[3]||d):(k=a[1],n=a[2]||d),m=a[0],j)p=h+i.replace(f,c(j));else if(e)throw new Error("Path params is required.");return l(k)&&-1===k.indexOf("=")?n=k:k&&(o=g(k),p=-1===p.indexOf("?")?`${p}?${o}`:`${p}&${o}`),this[b]({url:p,type:n,body:m,name:this.name,meta:this.meta})}function f(a){const b=u[a.methodLowerCase];if(!b)throw new Error(`APIzClient must implement ${a.methodLowerCase} method.`);const c=b.bind(a);return["url","method","meta","type","pathParams"].forEach(b=>{Object.defineProperty(c,b,{value:a[b],enumerable:!0,writable:!1})}),c}function g(a,c){let d,e,h,i,n,t={};if(l(a._baseURL)&&(d=a._baseURL),({baseURL:d=d,immutableMeta:e=r,paramRegex:h=p||s,querystring:i=o,client:n=q}=c||{}),!k(i))throw new Error("A querystring function must set.");if(!n)throw new Error("A client must set.");const u={baseURL:d,paramRegex:h,querystring:i,client:n};if(e)t=a||{};else for(const c in a)j(a[c])?t[c]=b(c,a[c],u):"_baseURL"!=c&&console.warn(`The ${c} in meta is not an object.`);const v=new Proxy({},{get(a,c,d){if(!t[c]||!m(t,c))return Reflect.get(a,c);t[c].init||(t[c]=b(c,t[c],u));const e=f(t[c]);return Reflect.set(d,c,e),e},getPrototypeOf(){return g.prototype}}),w=Object.create(v);return w.remove=function(a){return this[a]&&(t[a]=this[a]=void 0),this},w.add=function(a,c){if(t[a])throw new Error(`API "${a}" already exists.`);return t[a]=b(a,c,u),this[a]=f(t[a]),this},w}function h({querystring:a,paramRegex:b,immutableMeta:c,client:d,reset:e,defaultType:f}={reset:!0}){k(a)&&(o=a),b instanceof RegExp&&(p=b),r=c,q=d,n=f,e&&(o=p=q=n=void 0,r=!1)}const i=Map.call.bind(Object.prototype.toString),j=a=>"[object Object]"===i(a),k=a=>"function"==typeof a,l=a=>a&&"string"==typeof a,m=Map.call.bind(Object.prototype.propertyIsEnumerable);let n,o,p,q,r=!1;const s=/:((\w|-)+)/g,t=/\/\//g,u={get:d,head:d,post:e,put:e,patch:e,options:d,delete:d},v=(a,b)=>6>=b?a:"/";h({querystring:function(a){return"[object Object]"===Object.prototype.toString.call(a)?Object.keys(a).map(b=>Array.isArray(a[b])?a[b].map(a=>`${encodeURIComponent(b)}=${encodeURIComponent(a)}`).join("&"):`${encodeURIComponent(b)}=${encodeURIComponent(a[b])}`).join("&"):"string"==typeof a?a:JSON.stringify(a)},defaultType:"json"}),a.APIz=g,a.config=h,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=apiz.min.js.map
